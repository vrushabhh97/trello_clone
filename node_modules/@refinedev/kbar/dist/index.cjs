"use client"
var mt=Object.create;var v=Object.defineProperty;var ft=Object.getOwnPropertyDescriptor;var yt=Object.getOwnPropertyNames;var bt=Object.getPrototypeOf,gt=Object.prototype.hasOwnProperty;var l=(t,e)=>v(t,"name",{value:e,configurable:!0});var xt=(t,e)=>{for(var i in e)v(t,i,{get:e[i],enumerable:!0})},Q=(t,e,i,s)=>{if(e&&typeof e=="object"||typeof e=="function")for(let m of yt(e))!gt.call(t,m)&&m!==i&&v(t,m,{get:()=>e[m],enumerable:!(s=ft(e,m))||s.enumerable});return t};var P=(t,e,i)=>(i=t!=null?mt(bt(t)):{},Q(e||!t||!t.__esModule?v(i,"default",{value:t,enumerable:!0}):i,t)),ut=t=>Q(v({},"__esModule",{value:!0}),t);var At={};xt(At,{KBAR_LISTBOX:()=>o.KBAR_LISTBOX,KBarAnimator:()=>o.KBarAnimator,KBarContext:()=>o.KBarContext,KBarPortal:()=>o.KBarPortal,KBarPositioner:()=>o.KBarPositioner,KBarProvider:()=>o.KBarProvider,KBarResults:()=>o.KBarResults,KBarSearch:()=>o.KBarSearch,NO_GROUP:()=>o.NO_GROUP,Priority:()=>o.Priority,RefineKbar:()=>G,RefineKbarPropsContext:()=>N,RefineKbarProvider:()=>ht,VisualState:()=>o.VisualState,createAction:()=>o.createAction,getListboxItemId:()=>o.getListboxItemId,useKBar:()=>o.useKBar,useMatches:()=>o.useMatches,useRefineKbar:()=>w,useRegisterActions:()=>o.useRegisterActions});module.exports=ut(At);var T=P(require("react")),J=require("kbar"),o=require("kbar");var A=require("react"),p=require("@refinedev/core"),b=require("kbar");var h=l(t=>t.replace(/\w\S*/g,e=>e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()),"capitalize");var X=require("@refinedev/core");var w=l(()=>{let t=(0,p.useTranslate)(),{resource:e,resources:i,id:s,action:m}=(0,p.useResource)(),f=(0,p.useRouterType)(),y=(0,X.useGetToPath)(),K=(0,p.useGo)(),{mutate:Y}=(0,p.useDelete)(),{push:I,list:Rt,create:Bt,show:It,edit:Ct}=(0,p.useNavigation)(),Z=(0,p.useUserFriendlyName)(),tt=(0,A.useContext)(b.KBarContext),{can:c}=(0,p.useCanWithoutCache)(),[k,et]=(0,A.useState)([]);(0,A.useEffect)(()=>{l(async()=>await Promise.all(nt().flatMap(r=>ot(r))),"preaparedActions")().then(r=>et(r.flatMap(g=>g)))},[i,s,e,m]),(0,A.useEffect)(()=>{k.length===0&&tt.query.setVisualState(b.VisualState.hidden)},[k]);let nt=l(()=>{let n=[...i],r=n==null?void 0:n.findIndex(g=>(g.identifier??(g==null?void 0:g.name))===((e==null?void 0:e.identifier)??(e==null?void 0:e.name)));if(r>0){let g=n[r];n.splice(r,1),n.splice(0,0,g)}return n},"moveActionToFirst"),ot=l(async n=>{var V,$,q,F,_,j;let{name:r,label:g,list:it,create:O,canCreate:at,canEdit:rt,canShow:st,icon:pt,show:W,canDelete:ct,edit:H,route:St}=n,lt=((V=n==null?void 0:n.meta)==null?void 0:V.label)??(($=n==null?void 0:n.options)==null?void 0:$.label)??g,C=((q=n==null?void 0:n.meta)==null?void 0:q.icon)??((F=n==null?void 0:n.options)==null?void 0:F.icon)??pt,dt=((_=n==null?void 0:n.meta)==null?void 0:_.canDelete)??((j=n==null?void 0:n.options)==null?void 0:j.canDelete)??ct,S=lt??t(`${n.name}.${n.name}`,Z(n.name,"plural")),R=[];if(it&&(e!==void 0&&(e==null?void 0:e.name)!==r||m!==void 0&&(e==null?void 0:e.name)===r)){let{can:x}=await(c==null?void 0:c({resource:r,action:"list",params:{id:s,resource:n}}))||{can:!0};x&&R.push((0,b.createAction)({name:t("actions.list",h("list")),section:S,icon:C,perform:()=>{let a=y({resource:n,action:"list",legacy:f==="legacy"});a&&(f==="legacy"?I(a):K({to:a}))}}))}if((at||O)&&O&&(m!=="create"||(e==null?void 0:e.name)!==r)){let{can:x}=await(c==null?void 0:c({resource:r,action:"create",params:{resource:n}}))||{can:!0};x&&R.push((0,b.createAction)({name:t("actions.create",h("create")),section:S,icon:C,keywords:"new",perform:()=>{let a=y({resource:n,action:"create",legacy:f==="legacy"});a&&(f==="legacy"?I(a):K({to:a}))}}))}if((e==null?void 0:e.name)===r&&s){if((st||W)&&W&&m!=="show"){let{can:x}=await(c==null?void 0:c({resource:r,action:"show",params:{id:s,resource:n}}))||{can:!0};x&&R.push((0,b.createAction)({name:t("actions.show",h("show")),section:S,icon:C,perform:()=>{let a=y({resource:n,action:"show",legacy:f==="legacy",meta:{id:s}});a&&(f==="legacy"?I(a):K({to:a}))}}))}if((rt||H)&&H&&m!=="edit"){let{can:x}=await(c==null?void 0:c({resource:r,action:"edit",params:{id:s,resource:n}}))||{can:!0};x&&R.push((0,b.createAction)({name:t("actions.edit",h("edit")),section:S,icon:C,perform:()=>{let a=y({resource:n,action:"edit",legacy:f==="legacy",meta:{id:s}});a&&(f==="legacy"?I(a):K({to:a}))}}))}if(dt){let{can:x}=await(c==null?void 0:c({resource:r,action:"delete",params:{id:s,resource:n}}))||{can:!0};x&&R.push({id:"delete",name:t("actions.delete",h("delete")),section:S,icon:C},(0,b.createAction)({name:t("buttons.delete",h("delete")),section:t("buttons.confirm","Are you sure?"),parent:"delete",perform:()=>{Y({resource:n.name,id:s},{onSuccess:()=>{let a=y({resource:n,action:"list",legacy:f==="legacy"});a&&(f==="legacy"?I(a):K({to:a}))}})}}),(0,b.createAction)({name:t("buttons.cancel","Cancel"),parent:"delete",perform:()=>null}))}}return R},"createActionWithResource");(0,b.useRegisterActions)(k,[k])},"useRefineKbar");var B=P(require("react")),u=require("kbar");var M=l(()=>B.default.createElement(u.KBarPortal,null,B.default.createElement(u.KBarPositioner,{style:{opacity:1,transition:"background 0.35s cubic-bezier(0.4, 0, 0.2, 1) 0s",backdropFilter:"saturate(180%) blur(1px)",background:"rgba(0, 0, 0, 0.1)",zIndex:"9999"}},B.default.createElement(u.KBarAnimator,{style:{maxWidth:"600px",width:"100%",background:"white",color:"black",borderRadius:"8px",overflow:"hidden",boxShadow:"0px 4px 4px rgba(0, 0, 0, 0.25)"}},B.default.createElement(u.KBarSearch,{style:{padding:"12px 16px",fontSize:"16px",width:"100%",boxSizing:"border-box",outline:"none",border:"none",background:"rgb(252 252 252)",color:"black"}}),B.default.createElement(U,null)))),"CommandBar");var D=P(require("react")),L=require("kbar");var Kt={padding:"8px 16px",fontSize:"14px",textTransform:"uppercase",fontWeight:"bold",opacity:.5},U=l(()=>{let{results:t,rootActionId:e}=(0,L.useMatches)();return D.default.createElement(L.KBarResults,{items:t,onRender:({item:i,active:s})=>typeof i=="string"?D.default.createElement("div",{style:Kt},i):D.default.createElement(E,{action:i,active:s,currentRootActionId:e})})},"RenderResults");var d=P(require("react")),E=d.default.forwardRef(({action:t,active:e,currentRootActionId:i},s)=>{var f;let m=d.default.useMemo(()=>{if(!i)return t.ancestors;let y=t.ancestors.findIndex(K=>K.id===i);return t.ancestors.slice(y+1)},[t.ancestors,i]);return d.default.createElement("div",{ref:s,style:{padding:"12px 16px",background:e?"rgba(0 0 0 / 0.05)":"transparent",borderLeft:`2px solid ${e?"rgb(28 28 29)":"transparent"}`,display:"flex",alignItems:"center",justifyContent:"space-between",cursor:"pointer"}},d.default.createElement("div",{style:{display:"flex",gap:"8px",alignItems:"center",fontSize:14}},t.icon&&t.icon,d.default.createElement("div",{style:{display:"flex",flexDirection:"column"}},d.default.createElement("div",null,m.length>0&&m.map(y=>d.default.createElement(d.default.Fragment,{key:y.id},d.default.createElement("span",{style:{opacity:.5,marginRight:8}},y.name),d.default.createElement("span",{style:{marginRight:8}},"\u203A"))),d.default.createElement("span",{style:{color:t.name.toLocaleUpperCase()==="DELETE"?"red":"black"}},t.name)),t.subtitle&&d.default.createElement("span",{style:{fontSize:12}},t.subtitle))),(f=t.shortcut)!=null&&f.length?d.default.createElement("div",{"aria-hidden":!0,style:{display:"grid",gridAutoFlow:"column",gap:"4px"}},t.shortcut.map(y=>d.default.createElement("kbd",{key:y,style:{padding:"4px 6px",background:"rgba(0 0 0 / .1)",borderRadius:"4px",fontSize:14}},y))):null)});E.displayName="ResultItem";var z=P(require("react"));var G=l(({commandBarProps:t})=>{let e=(0,z.useContext)(N);w();let i={...e,...t};return z.default.createElement(M,{...i})},"RefineKbar");var N=(0,T.createContext)({}),ht=l(({children:t,commandBarProps:e})=>T.default.createElement(N.Provider,{value:e??{}},T.default.createElement(J.KBarProvider,null,t)),"RefineKbarProvider");
//# sourceMappingURL=index.cjs.map